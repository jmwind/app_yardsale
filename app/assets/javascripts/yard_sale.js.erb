var YSPARAMS = {host:"<%= Settings.host %>/"};

var YS = YS || {};
YS.shop       = Shopify.shop;
YS.api_url    = YSPARAMS.host + "proxy"; // proxy api
YS.product_id = $(".yardsale-product").attr('data-id');
YS.elSettings = {};
YS.extraAjaxParams = {shop: YS.shop};
YS.noop       = function(){};  // noop

YS.productCallback = function(data) {
  $(".yardsale-product").append(data['html']);
};

YS.productList = function() {
  var params = $.extend({product_id: YS.product_id}, YS.extraAjaxParams);
  $.get(YS.api_url + "/waitlists", params, YS.productCallback, "jsonp");
};

YS.toggleForm = function(event) {
  event.preventDefault();
  $(".waitlist_form").slideToggle();
};

YS.submitForm = function(event) {
  event.preventDefault();
};

$( document ).ready(function() {
  var el = $(".yardsale-product");
  if( el && el.length > 0) {
    $(".yardsale-product").on("click", ".wl_form_toggle", YS.toggleForm);
    YS.productList();
  }
});
